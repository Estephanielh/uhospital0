<!DOCTYPE html>
<html>

<body>

    <head>
        <link rel="stylesheet" href="styles.css">
        <title>Doctor Dashboard | UHospital</title>
    </head>
    <div class="black form" id="dashboardForm">
        <h1>Dashboard Doctor</h1>
        <p id="currentUser"></p>
        <br>
        <a class="abutton largebutton buttonblack" id="citasPendientes">Citas Pendientes</a>
        <br><br>
        <a class="abutton largebutton buttonblack" id="citas">Mis Citas</a>
        <br><br>
        <a href="generar receta.html" class="abutton largebutton buttonblack">Generar Receta</a>
        <br><br>
        <a class="abutton largebutton buttonblack" id="modificarButton">Modificar Perfil</a>
    </div>
    <script>
        let dashboardForm = document.getElementById("dashboardForm");
        //getting URL parameters
        const queryStrings = window.location.search;
        const urlParams = new URLSearchParams(queryStrings);
        const firstName = urlParams.get("first_name");
        const lastName = urlParams.get("last_name");
        const date = urlParams.get("date")
        const gender = urlParams.get("gender")
        const nickname = urlParams.get("nickname")
        const speciality = urlParams.get("speciality")
        const password = urlParams.get("password")
        const phone = urlParams.get("phone")
        const type = urlParams.get("type")
        let params ="first_name="+firstName;
        params += "&last_name=" + lastName;
        params += "&date=" + date;
        params += "&gender=" + gender;
        params += "&nickname=" + nickname;
        params += "&speciality=" + speciality;
        params += "&password=" + password;
        params += "&phone=" + phone;
        params += "&type=" + type;
        params += "&page=1";
        let modificarButton = document.getElementById("modificarButton");
        dashboardForm.addEventListener("submit", (e) => {
            e.preventDefault();
        });
        modificarButton.addEventListener("click", (e) => {
            modificarButton.href = "modificar perfil doctor.html?" + params;
        })
        let citasButton = document.getElementById("citas");
        citasButton.addEventListener("click", (e) => {
            citasButton.href = "citas asignadas.html?doctor=" + nickname;
        })
        let citasPendientes = document.getElementById("citasPendientes");
        citasPendientes.addEventListener("click", (e) => {
            citasPendientes.href = "citas pendientes.html?doctor=" + nickname;
        })
        //getting inputs
        let currentUser = document.getElementById("currentUser");
        if (gender == "F" || gender == "f") {
            currentUser.innerText = `¡Bienvenida, ${firstName} ${lastName}!`;
        } else {
            currentUser.innerText = `¡Bienvenido, ${firstName} ${lastName}!`;
        }
    </script>
</body>

</html>