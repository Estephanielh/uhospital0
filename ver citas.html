<!DOCTYPE html>
<html>

<body>

    <head>
        <link rel="stylesheet" href="styles.css">
        <title>Citas | UHospital</title>
    </head>
    <div class=black>
        <h1>Citas</h1>
        <table style="text-align: center;">
            <caption> Visualizaci√≥n de citas</caption>
            <th>
                <tr class="tableheader">
                    <td>Fecha</td>
                    <td>Hora</td>
                    <td>Motivo</td>
                    <td>Doctor</td>
                    <td>Estado</td>
                </tr>
            </th>
            <tbody id="citas">

            </tbody>
    </div>

    <script>
        let citas = document.getElementById("citas");
        //URL parameters
        const queryStrings = window.location.search;
        const urlParams = new URLSearchParams(queryStrings);
        const paciente = urlParams.get("patient");
        //generar
        getCitas();

        function getCitas() {
            fetch("https://uhospital0.herokuapp.com/appointment")
                .then((response) => response.json())
                .then((data) => {
                    citas.innerHTML = " ";
                    data.forEach((appointment) => {
                        if (appointment.patient == paciente) {
                            let row = document.createElement("tr");
                            let date = document.createElement("td");
                            date.innerText = appointment.date;
                            let time = document.createElement("td");
                            time.innerText = appointment.time;
                            let description = document.createElement("td");
                            description.innerText = appointment.description;
                            let status = document.createElement("td");
                            status.innerText = appointment.status;
                            let doctor = document.createElement("td");
                            doctor.innerText = appointment.doctor;
                            row.append(date);
                            row.append(time);
                            row.append(description);
                            row.append(doctor);
                            row.append(status);
                            citas.append(row);
                        }
                    });
                })
                .catch((error) => console.error(error));
        }
    </script>
</body>

</html>